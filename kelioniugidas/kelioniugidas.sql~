--
-- Database: `kelioniugidas`
-- VERSIJA SU NAKVYNĖMIS
--

-- ============================================
-- VARTOTOJŲ LENTELĖ
-- ============================================
CREATE TABLE `users` (
  `username` varchar(30) NOT NULL,
  `password` varchar(32) DEFAULT NULL,
  `userid` varchar(32) NOT NULL,
  `userlevel` tinyint(1) UNSIGNED DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`userid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `users` VALUES
('Administratorius', '16c354b68848cdbd8f54a226a0a55b21', 'a2fe399900de341c39c632244eaf8483', 9, 'admin@test.lt', NOW()),
('keliautojas', '16c354b68848cdbd8f54a226a0a55b21', 'b3fe399900de341c39c632244eaf8484', 4, 'keliautojas@test.lt', NOW());

-- ============================================
-- OBJEKTŲ TIPAI (+ NAKVYNĖ!)
-- ============================================
CREATE TABLE `objektu_tipai` (
  `tipo_id` int(11) NOT NULL AUTO_INCREMENT,
  `pavadinimas` varchar(50) NOT NULL,
  `ar_nakyvne` tinyint(1) DEFAULT 0 COMMENT '1=nakvynė, 0=lankytinas objektas',
  PRIMARY KEY (`tipo_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `objektu_tipai` VALUES
(1, 'Muziejus', 0),
(2, 'Gamtos objektas', 0),
(3, 'Pilis', 0),
(4, 'Bažnyčia', 0),
(5, 'Nakvynė', 1);  -- NAKVYNĖS TIPAS!

-- ============================================
-- LANKYTIINI OBJEKTAI + NAKVYNĖS
-- ============================================
CREATE TABLE `objektai` (
  `objekto_id` int(11) NOT NULL AUTO_INCREMENT,
  `pavadinimas` varchar(100) NOT NULL,
  `tipo_id` int(11) NOT NULL,
  `aprasymas` text,
  `miestas` varchar(50),
  `rekomenduojamas_laikas` int(11) COMMENT 'Minutėmis (tik lankytiniems objektams)',
  PRIMARY KEY (`objekto_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `objektai` VALUES
-- LANKYTIINI OBJEKTAI
(1, 'Gedimino pilis', 3, 'Vilniaus aukštutinė pilis', 'Vilnius', 90),
(2, 'Trakų pilis', 3, 'Salos pilis Galvės ežere', 'Trakai', 120),
(3, 'Kuršių nerija', 2, 'UNESCO saugomas nacionalinis parkas', 'Neringa', 240),
(4, 'MO muziejus', 1, 'Šiuolaikinio meno muziejus', 'Vilnius', 75),
(5, 'Katedra', 4, 'Vilniaus arkikatedra bazilika', 'Vilnius', 60),
(6, 'Aukštaitijos nacionalinis parkas', 2, 'Didžiausias nacionalinis parkas', 'Ignalina', 180),
(7, 'Kernavės piliakalniai', 3, 'UNESCO saugomas objektas', 'Kernavė', 120),

-- NAKVYNĖS VIETOS
(8, 'Viešbutis "Vilnius Grand"', 5, 'Viešbutis Vilniaus centre', 'Vilnius', NULL),
(9, 'Svečių namai "Trakų sodyba"', 5, 'Jaukūs svečių namai šalia Trakų pilies', 'Trakai', NULL),
(10, 'Poilsio namai "Neringa"', 5, 'Nameliai Kuršių nerijoje', 'Neringa', NULL),
(11, 'Viešbutis "Ignalina"', 5, 'Viešbutis prie Aukštaitijos NP', 'Ignalina', NULL);

-- ============================================
-- ATSILIEPIMAI
-- ============================================
CREATE TABLE `atsiliepimai` (
  `atsiliepimo_id` int(11) NOT NULL AUTO_INCREMENT,
  `objekto_id` int(11) NOT NULL,
  `vartotojas_userid` varchar(32) NOT NULL,
  `ivertinimas` tinyint(1) CHECK (`ivertinimas` BETWEEN 1 AND 5),
  `komentaras` text,
  `data` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`atsiliepimo_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `atsiliepimai` VALUES
(1, 1, 'b3fe399900de341c39c632244eaf8484', 5, 'Puikus vaizdas!', NOW()),
(2, 2, 'b3fe399900de341c39c632244eaf8484', 5, 'Graži pilis!', NOW()),
(3, 3, 'b3fe399900de341c39c632244eaf8484', 5, 'Unikali gamta!', NOW()),
(4, 8, 'b3fe399900de341c39c632244eaf8484', 4, 'Geras viešbutis, patogi vieta', NOW()),
(5, 9, 'b3fe399900de341c39c632244eaf8484', 5, 'Jaukūs namai, rekomenduoju!', NOW());

-- ============================================
-- MARŠRUTAI
-- ============================================
CREATE TABLE `marsrutai` (
  `marsruto_id` int(11) NOT NULL AUTO_INCREMENT,
  `pavadinimas` varchar(100) NOT NULL,
  `aprasymas` text,
  `trukme_dienos` int(11) DEFAULT 1,
  PRIMARY KEY (`marsruto_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `marsrutai` VALUES
(1, 'Vilniaus turas', 'Vienos dienos Vilniaus maršrutas', 1),
(2, 'Trakų kelionė su nakvyne', 'Dviejų dienų kelionė į Trakus', 2),
(3, 'Pajūrio savaitgalis', 'Trijų dienų kelionė į Kuršių neriją', 3);

-- ============================================
-- MARŠRUTO OBJEKTAI
-- ============================================
CREATE TABLE `marsruto_objektai` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `marsruto_id` int(11) NOT NULL,
  `objekto_id` int(11) NOT NULL,
  `eiles_nr` int(11) NOT NULL,
  `diena` int(11) DEFAULT 1 COMMENT 'Kurios dienos objektas',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `marsruto_objektai` VALUES
-- Maršrutas 1 (1 diena, be nakvynės)
(1, 1, 1, 1, 1),
(2, 1, 4, 2, 1),
(3, 1, 5, 3, 1),

-- Maršrutas 2 (2 dienos, su nakvyne)
(4, 2, 1, 1, 1),  -- 1 diena
(5, 2, 9, 2, 1),  -- Nakvynė Trakuose (1 dienos pabaiga)
(6, 2, 2, 3, 2),  -- 2 diena

-- Maršrutas 3 (3 dienos, 2 nakvynės)
(7, 3, 1, 1, 1),   -- 1 diena
(8, 3, 8, 2, 1),   -- Nakvynė Vilniuje
(9, 3, 3, 3, 2),   -- 2 diena
(10, 3, 10, 4, 2), -- Nakvynė Neringoje
(11, 3, 3, 5, 3);  -- 3 diena

-- ============================================
-- FORUMO TEMOS
-- ============================================
CREATE TABLE `forumo_temos` (
  `temos_id` int(11) NOT NULL AUTO_INCREMENT,
  `pavadinimas` varchar(150) NOT NULL,
  `autorius_userid` varchar(32) NOT NULL,
  `sukurta` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`temos_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `forumo_temos` VALUES
(1, 'Geriausi maršrutai', 'b3fe399900de341c39c632244eaf8484', NOW()),
(2, 'Kur apsistoti?', 'b3fe399900de341c39c632244eaf8484', NOW());

-- ============================================
-- FORUMO PRANEŠIMAI
-- ============================================
CREATE TABLE `forumo_pranesimal` (
  `pranesimo_id` int(11) NOT NULL AUTO_INCREMENT,
  `temos_id` int(11) NOT NULL,
  `autorius_userid` varchar(32) NOT NULL,
  `tekstas` text NOT NULL,
  `data` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`pranesimo_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `forumo_pranesimal` VALUES
(1, 1, 'b3fe399900de341c39c632244eaf8484', 'Rekomenduoju Kuršių neriją!', NOW()),
(2, 2, 'a2fe399900de341c39c632244eaf8483', 'Trakuose yra gerų svečių namų.', NOW());
